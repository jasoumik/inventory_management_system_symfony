{% extends 'base.html.twig' %}

{% block title %}New StockOut{% endblock %}

{% block body %}
    {{ include('navbar.html.twig') }}
    <h1>Create new StockOut</h1>

    {{ include('stock_out/_form.html.twig') }}

    <a href="{{ path('stock_out_index') }}">back to list</a>

{% endblock %}
 {% block javascripts %}
     {{ parent() }}
     <script>
         $(document).ready(function () {
             $('.input-datepicker').datepicker({
                 clearBtn: true,
                 todayHighlight: true,
                 toggleActive: true,
                 autoclose: true,
                 format: 'dd/mm/yyyy'
             });
             $('.select').select2();
             $(".select").on('change',function() {
                 var id = $(this).val();
                 console.log(id);
                 if(id) {
                     $.ajax({
                         url: "/stock/out/balance/" + id,
                         type: "GET",
                         dataType: "json",
                         success: function (data) {
                             var balance = data.balance;
                             console.log(balance);
                             $("label[for='stock_out_quantity']").html("<b>Quantity</b> [Available Quantity is " + balance+"]").css('color', 'blue');
                             $( "label[for='stock_out_quantity'] b" )
                                 .css( "color", "black" )
                             $("#hiddenBalance").text(balance)
                         }
                     });
                 }else{
                     $("#msg").text('Please Select Product');
                 }
             });

         });
     </script>
 {% endblock %}

