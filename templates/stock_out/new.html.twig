{% extends 'base.html.twig' %}

{% block title %}New StockOut{% endblock %}

{% block body %}

    <h1>Create new StockOut</h1>

    {{ include('stock_out/_form.html.twig') }}

    <a href="{{ path('stock_out_index') }}">Back to list</a>

    <script>
        $(document).ready(function(){

            $('.select').select2();
            $(".select").on('change',function() {
                var id = $(this).val();
                if(id) {
                    $.ajax({
                        url: "/stock/out/balance/" + id,
                        type: "GET",
                        dataType: "json",

                        success: function (data) {
                            var balance = data.balance;
                            $("label[for='stock_out_quantity']").html("<b>Quantity</b> [Available Quantity is " + balance+"]").css('color', 'blue');
                            $( "label[for='stock_out_quantity'] b" )
                                .css( "color", "black" )
                        }

                    });
                }else{
                    $("#msg").text('Please Select Product');
                }
            });
            // $(".stockOutForm").validate({
            //     rules:{
            //
            //         'stock_out[date]':{
            //             required:true,
            //         },
            //         'stock_out[quantity]':{
            //             required:true,
            //             digits: true
            //         }
            //     },
            //     messages:{
            //
            //         'stock_out[date]':{
            //             required:'Please Select Date',
            //         },
            //         'stock_out[quantity]':{
            //             required:'Please give a valid quantity',
            //             digits:'Quantity has to be a number'
            //         }
            //     },
            //     errorPlacement: function (label, element) {
            //         label.addClass('mt-2 text-danger');
            //         label.insertAfter(element);
            //     },
            //     highlight: function (element, errorClass) {
            //         $(element).parent().addClass('has-danger')
            //         $(element).addClass('form-control-danger')
            //     }
            // });
        });
    </script>
{% endblock %}

{#var str = "";#}
{#$( "select option:selected" ).each(function() {#}
{#str += $( this ).text() + " ";#}
{#});#}
{#$( "#msg" ).text( str );#}